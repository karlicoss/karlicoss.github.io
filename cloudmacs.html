<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Icon made by Twitter -->
        <!-- https://twemoji.twitter.com/content/twemoji-twitter/en.html -->
        <link rel="icon" href="./robot-face.png">
        <link rel="apple-touch-icon" href="./robot-face.png">

        <meta name="generator" content="hakyll">
        <meta name="language" content="English">
        
        <meta name="keywords" content="emacs pkm selfhosted">
        
        <!-- TODO concat with keywords tags; also need to make comma separated? -->

        <title>Cloudmacs: Emacs in your web browser | beepb00p</title>

        <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="./css/default.css?v=3" />
        <!-- TODO make conditional?? -->
        <link rel="stylesheet" href="./css/posts-list.css" /> 
        <link rel="stylesheet" href="./css/links.css?v=4" />

        

        <link rel="canonical" href="https://beepb00p.xyz/cloudmacs.html" />

        <!-- can test it with https://telegram.me/webpagebot -->
        <!-- or https://developers.facebook.com/tools/debug -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://beepb00p.xyz/cloudmacs.html" /> <!-- TODO base? -->
        <meta property="og:title" content="Cloudmacs: Emacs in your web browser | beepb00p" />
        <meta property="og:description" content="How I really wanted Spacemacs everywhere and my wish came true thanks to Docker" />
        <!-- ugh. why is image necessary??? otherwise other parts aren't working or I get lots of 404s -->
        <!-- ugh. Facebook really wants jpg? -->
        <!-- also Facebook displays it with black background, but whatever, fuck it. -->
        <meta property="og:image" content="https://beepb00p.xyz/robot-face.jpg" />

    </head>
    <body>
        <!-- TODO make semantic -->
        <header>
            <nav>
                <span class="nav-left">
                    <a class="fat" href="./">Home</a>
                    <!-- TODO eh, not sure if this symbol is good for that... -->
                    路
                    <a class="fat" href="./ideas.html">Ideas</a>
                    路
                    <a class="fat" href="./exobrain">Exobrain</a>
                    路
                    <a class="fat" href="./tags.html">Tags</a>
                </span>
                <span class="nav-right">
                    <a class="fat" href="./feed.html">Feed</a>
                    路
                    <a class="fat" href="./site.html">Site</a>
                    路
                    <a class="fat" href="./me.html">Me</a>
                </span>
            </nav>
        </header>

        <main>
            

<!-- <link rel="stylesheet" href="/css/org.css" /> -->

<link rel="stylesheet" href="./css/htmlize.css" />
<link rel="stylesheet" href="./css/org-default.css" />

<link rel="stylesheet" href="./css/org-extra.css?v=3" />



<article>
    
    <section class="post-title">
    <h1>Cloudmacs: Emacs in your web browser</h1>
    <div class="summary">How I really wanted Spacemacs everywhere and my wish came true thanks to Docker</h2>
    </section>
    <!-- are sections appropriate for that? -->

    <section class="content">
    <p>
TLDR: I'm running my spacemacs as a web service on my VPS, <a href="https://github.com/karlicoss/cloudmacs">check it out too</a>.
</p>
<img src="https://user-images.githubusercontent.com/291333/64866462-26e25c80-d644-11e9-9ad5-ad9d9808b0cb.png" width="auto" />
<p>
Since I've became hooked on emacs, I've been looking for ways to have same experience in my browser.
Sometimes you have to use non-personal computers where it's not possible/undesirable to install desktop Emacs and Dropbox/Syncthing to access your personal data. 
So I've been looking for some cloud solution since I've got a VPS.
</p>
<p>
The closest tool to what I wanted was <a href="https://github.com/mickael-kerjean/filestash">Filestash</a>: it supports vim/emacs bindings and some <a href="https://www.filestash.app/2018/05/31/release-note-v0.1">org-mode goodies</a>.
However, it wasn't anywhere as convenient as  Emacs.
I'm also moving from Dropbox to Syncthing, so was planning to abandon Filestash anyway as it doesn't allow local files, only ftp or git.
(<b>UPD</b>: <a href="./cloudmacs.html#isso-36">author</a> mentions some planned support for Syncthing)
</p>
<p>
Dropbox is not capable of previewing arbitrary text files let alone edit; and even if it could you obviously wouldn't get anything close to your usual emacs workflow.
</p>
<p>
And you could imagine that while Emacs/Vim style editing is fairly application <a href="https://github.com/brookhong/Surfingkeys#vim-editor-and-emacs-editor">agnostic</a>, it's a thankless job to rewrite/port all the amazing emacs packages and features I'm used to like neotree, helm, refile, swoop, agenda, projectile, org-drill etc.
</p>
<p>
So I figured the only thing that would keep me happy is to run emacs itself over the web! Thankfully, due to its TUI interface that works surprisingly well.
</p>
<p>
It works <b><b>really</b></b> well with spacemacs/evil style <code class="inline">SPC</code> and comma bindings because they for the most part don't overlap with OS/browser hotkeys.
</p>
<p>
Also it's the first time I properly used Docker apart from running other people's containers so here are few non-obvious things I learnt which you might find useful:
</p>
<ul class="org-ul">
<li><a href="https://docs.docker.com/develop/develop-images/multistage-build">Multistage build</a> is a painless way to extend someone else's containers or combine several containers in one</li>
<li><a href="https://docs.docker.com/engine/reference/commandline/build/#set-build-time-variables---build-arg">build time variables</a> is a nice way to make your container more amendable, e.g. you can avoid hardcoding versions if you use it</li>
<li><p>
Perhaps the trickiest one: docker reuses the host kernel and as a consequence same user IDs, so if you built your container as root (which is normally the case if you pull from Docker Hub), your container will write back to mounted volumes as root too!
</p>
<p>
To get around that there is a somewhat hacky <a href="https://github.com/karlicoss/cloudmacs/blob/master/asEnvUser">asEnvUser</a> script and custom <a href="https://github.com/karlicoss/cloudmacs/blob/master/compose">docker-compose wrapper</a> that take care of preserving user ID. 
</p></li>
</ul>

    </section>

    
    <section class="footer">
        <div class="post-tags"><a class="post-tag" href="./tags.html#emacs">#emacs</a> <a class="post-tag" href="./tags.html#pkm">#pkm</a> <a class="post-tag" href="./tags.html#selfhosted">#selfhosted</a></div>
        <!-- TODO post-date? -->
        <div class="date">12 September 2019</div>
    </section>
    

    
    <br>
    <div>Discussion:</div>
    <ul>
    
        <li><a href="https://news.ycombinator.com/item?id=21633149"><b>hackernews</b></a></li>
    
        <li><a href="https://www.reddit.com/r/emacs/comments/e1o6dz/cloudmacs_emacs_in_your_web_browser">/r/emacs</a></li>
    
        <li><a href="https://www.reddit.com/r/selfhosted/comments/d38utu/cloudmacs_make_your_lovely_emacs_setup_accessible">/r/selfhosted</a></li>
    
        <li><a href="https://www.reddit.com/r/orgmode/comments/d3pm06/cloudmacs_work_with_your_orgmode_files_and_agenda">/r/orgmode</a></li>
    
    </ul>
    

    <section class="comments">
    <script data-isso="https://beepb00p.xyz/comments/" data-isso-reply-to-self="true" src="https://beepb00p.xyz/comments/js/embed.min.js">
</script>

<section id="isso-thread" data-isso-id="isso_cloudmacs"></section>

    </section>

</article>

        </main>

        <!-- TODO hmm maybe display something in a footer, so it's clear it's end of content... -->
        

        <!-- TODO make semantic -->
        <footer>
            <span style="float:left">
            <a href="https://twitter.com/karlicoss"> me @twitter</a>
            路
            <a href="https://github.com/karlicoss"> me @github</a>
            </span>

            <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>
            
            
        </footer>
    </body>
</html>
