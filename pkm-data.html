<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Icon made by Twitter -->
        <!-- https://twemoji.twitter.com/content/twemoji-twitter/en.html -->
        <link rel="icon" href="./robot-face.png">
        <link rel="apple-touch-icon" href="./robot-face.png">

        <meta name="generator" content="hakyll">
        <meta name="language" content="English">
        
        <meta name="keywords" content="pkm dataliberation">
        
        <!-- TODO concat with keywords tags; also need to make comma separated? -->

        <title>TODO Exporting your data | Mildly entertainingᵝ</title>

        <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="./css/default.css?v=3" />
        <link rel="stylesheet" href="./css/links.css?v=4" />

        
    </head>
    <body>
        <header>
            <nav>
                <span class="nav-left">
                    <a class="fat" href="./">Home</a>
                    <!-- TODO eh, not sure if this symbol is good for that... -->
                    ·
                    <a class="fat" href="./ideas.html">Ideas</a>
                    ·
                    <a class="fat" href="./notes.html">Notes</a>
                    ·
                    <a class="fat" href="./tags.html">Tags</a>
                </span>
                <span class="nav-right">
                    <a class="fat" href="./feed.html">Feed</a>
                    ·
                    <a class="fat" href="./site.html">Site</a>
                    ·
                    <a class="fat" href="./me.html">Me</a>
                </span>
            </nav>
        </header>

        <main>
            

<!-- <link rel="stylesheet" href="/css/org.css" /> -->

<link rel="stylesheet" href="./css/htmlize.css" />
<link rel="stylesheet" href="./css/org-default.css" />

<link rel="stylesheet" href="./css/org-extra.css?v=3" />



<article>
    
    <div>THIS IS A DRAFT! It will appear on the main page once finished!</div>
    
    <section class="post-title">
    <h1>TODO Exporting your data</h1>
    
    </section>
    <!-- are sections appropriate for that? -->

    <section class="content">
    <div class="outline-2" id="outline-container-org0000005">
<h2 id="org0000005"><a class="headerlink" href="#org0000005">¶</a><span class="section-number-2">1</span> What do I do?</h2>
<div class="outline-text-2" id="text-1">
<p>
I could probably spend more time whining and venting, but I'm lucky to be a software engineer, which means I can overcome many of these difficulties I describe.
</p>
<p>
TODO kind of meta-approach??? dunno  
</p>
<p>
For many services that I use I didn't manage to find existing solutions for exporting all my data so had to implement my own.
That however gave me opportunity to develop some common pattens.
</p>
</div>
<div class="outline-3" id="outline-container-org0000000">
<h3 id="org0000000"><a class="headerlink" href="#org0000000">¶</a><span class="todo TODO">TODO</span> regular backups</h3>
<div class="outline-text-3" id="text-org0000000">
<p>
For some services, it's enough to keep the 'latest' snapshot of all your data. However as I mentioned above (TODO) that's not always the case.
I see these ways of dealing with such things:
</p>
<ul class="org-ul">
<li><p>
Single full export (non-incremental)
</p>
<p>
Basically means keeping last version of data.
TODO e.g. if you couldn't de
TODO deleted data
TODO api limits
</p></li>
<li><p>
Single incremental backup
</p>
<p>
That's kind of necessary if your data source is huge. TODO telegram export/fbchat/twitter export?
</p>
<p>
Typically that means that you need some additional logic to determine the point (e.g. timestamp/message id) to continue from
High opportunity for errors.
</p></li>
</ul>
<ul class="org-ul">
<li><p>
TODO ??? not sure how to name it Regular full backups
</p>
<p>
Upsides:
</p>
<ul class="org-ul">
<li>Resilient towards deleted content/data corruption/flaky APIs (TODO pinboard)</li>
<li>Helps against APIs rate limiting if you run them often enough</li>
<li>Straightforward to normalise and unify – you are not overwriting anything</li>
</ul>
<p>
Downsides:
</p>
<ul class="org-ul">
<li><p>
takes extra space
</p>
<p>
Personally, storage is not really a concern for me because exported data size grows linearly with time, archived data is quite small.
</p></li>
<li><p>
takes more time to merge snapshots and process
</p>
<p>
Again, it only results in linear slowdown and pretty instantaneous for most data sources I have.
</p>
<p>
TODO caching?
</p></li>
</ul></li>
</ul>
</div>
</div>
<div class="outline-3" id="outline-container-org0000001">
<h3 id="org0000001"><a class="headerlink" href="#org0000001">¶</a><span class="todo TODO">TODO</span> idempotence:</h3>
<div class="outline-text-3" id="text-org0000001">
<p>
export tools should result in output 
</p>
<p>
TODO sqlite databases?
TODO atomic moves?
TODO backup wrapper? sadly haven't found an existing tool. it deals with: compression/timestamping/atomicity/backoffs
TODO maybe cooperate with python via some exit code??
</p>
</div>
</div>
<div class="outline-3" id="outline-container-org0000002">
<h3 id="org0000002"><a class="headerlink" href="#org0000002">¶</a><span class="todo TODO">TODO</span> reusing existing API bindings as long as possible</h3>
<div class="outline-text-3" id="text-org0000002">
<p>
TODO example: Hypothesis submodule?
they often deal with dirty gritty details like API limiting and retrying
</p>
<p>
Python is very good for hacking and monkey patching if you need a bit of extra logic
TODO praw as example??
</p>
</div>
</div>
<div class="outline-3" id="outline-container-org0000003">
<h3 id="org0000003"><a class="headerlink" href="#org0000003">¶</a><span class="todo TODO">TODO</span> secrets.py file</h3>
<div class="outline-text-3" id="text-org0000003">
<p>
TODO also link to post that python is a good format for configs?
</p>
</div>
<div class="outline-4" id="outline-container-org0000004">
<h4 id="org0000004"><span class="todo TODO">TODO</span> <span class="priority">[B]</span> Having secrets module is very convenient for interactive messing with python .   <span class="tag"><span class="backup">backup</span> <span class="blog">blog</span></span></h4>
<div class="outline-text-4" id="text-org0000004">
<p>
So it doesn't end up in your shell/interpreter history. Also you can keep code next to secrets (e.g. for refreshing tokens)
</p>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org000000b">
<h2 id="org000000b"><a class="headerlink" href="#org000000b">¶</a><span class="section-number-2">2</span> How to liberate your data</h2>
<div class="outline-text-2" id="text-2">
</div>
<div class="outline-3" id="outline-container-org0000006">
<h3 id="org0000006"><a class="headerlink" href="#org0000006">¶</a><span class="todo TODO">TODO</span> <span class="priority">[C]</span> guide to extracting parameters from json get queries?   <span class="tag"><span class="blog">blog</span> <span class="backup">backup</span> <span class="dataliberation">dataliberation</span></span></h3>
<div class="outline-text-3" id="text-org0000006">
</div>
</div>
<div class="outline-3" id="outline-container-org0000007">
<h3 id="org0000007"><a class="headerlink" href="#org0000007">¶</a><span class="todo TODO">TODO</span> <span class="timestamp-wrapper"><span class="timestamp">[2019-09-30 21:31]</span></span> scraping; give amazon as example?</h3>
</div>
<div class="outline-3" id="outline-container-org0000008">
<h3 id="org0000008"><a class="headerlink" href="#org0000008">¶</a><span class="todo TODO">TODO</span> <span class="timestamp-wrapper"><span class="timestamp">[2019-09-29 23:30]</span></span> write about bwrapper?</h3>
<div class="outline-text-3" id="text-org0000008">
<p>
mode with utcnow – convenient for me
making interface dump to stdout makes it easier to pipe and make it atomic and stuff
compression
</p>
</div>
</div>
<div class="outline-3" id="outline-container-org000000a">
<h3 id="org000000a"><a class="headerlink" href="#org000000a">¶</a><span class="todo TODO">TODO</span> <span class="timestamp-wrapper"><span class="timestamp">[2019-09-30 22:01]</span></span> why not borg?</h3>
<div class="outline-text-3" id="text-org000000a">
</div>
<div class="outline-4" id="outline-container-org0000009">
<h4 id="org0000009"><span class="timestamp-wrapper"><span class="timestamp">[2019-09-30 22:01]</span></span> harder to access programmatically</h4>
<div class="outline-text-4" id="text-org0000009">
<p>
read only if it's mounted
</p>
<p>
I was thinking of using some sort of filesystem that's capable of compressing on the fly, but for me it hasn't been a massive concern so far
</p>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org0000015">
<h2 id="org0000015"><a class="headerlink" href="#org0000015">¶</a><span class="section-number-2">3</span> My implementation</h2>
<div class="outline-text-2" id="text-3">
</div>
<div class="outline-3" id="outline-container-org000000c">
<h3 id="org000000c"><a class="headerlink" href="#org000000c">¶</a><span class="todo TODO">TODO</span> <span class="priority">[B]</span> benefit is that you can use model/export files both for backup,historic and accessing realtime data   <span class="tag"><span class="dataliberation">dataliberation</span> <span class="blog">blog</span></span></h3>
<div class="outline-text-3" id="text-org000000c">
</div>
<div class="outline-4" id="outline-container-org000000d">
<h4 id="org000000d"><span class="todo TODO">TODO</span> could generate readme with link to 'long' context and 'short' summary</h4>
</div>
</div>
<div class="outline-3" id="outline-container-org000000e">
<h3 id="org000000e"><a class="headerlink" href="#org000000e">¶</a><span class="todo TODO">TODO</span> <span class="priority">[C]</span> would be nice to have main for models?   <span class="tag"><span class="dataliberation">dataliberation</span></span></h3>
<div class="outline-text-3" id="text-org000000e">
</div>
</div>
<div class="outline-3" id="outline-container-org000000f">
<h3 id="org000000f"><a class="headerlink" href="#org000000f">¶</a><span class="todo TODO">TODO</span> <span class="priority">[C]</span> do simple html dashboards for each exporter?   <span class="tag"><span class="dataliberation">dataliberation</span></span></h3>
<div class="outline-text-3" id="text-org000000f">
</div>
</div>
<div class="outline-3" id="outline-container-org0000010">
<h3 id="org0000010"><a class="headerlink" href="#org0000010">¶</a><span class="todo TODO">TODO</span> <span class="priority">[C]</span> take single path as argument? or maybe glob=true?   <span class="tag"><span class="dataliberation">dataliberation</span></span></h3>
<div class="outline-text-3" id="text-org0000010">
</div>
</div>
<div class="outline-3" id="outline-container-org0000011">
<h3 id="org0000011"><a class="headerlink" href="#org0000011">¶</a><span class="todo TODO">TODO</span> <span class="priority">[C]</span> motivation for incremental: Monzo   <span class="tag"><span class="backup">backup</span></span></h3>
<div class="outline-text-3" id="text-org0000011">
<p>
After a user has authenticated, your client can fetch all of their transactions, and after 5 minutes, it can only sync the last 90 days of transactions. If you need the user’s entire transaction history, you should consider fetching and storing it right after authentication. 
</p>
</div>
</div>
<div class="outline-3" id="outline-container-org0000012">
<h3 id="org0000012"><a class="headerlink" href="#org0000012">¶</a><span class="todo TODO">TODO</span> <span class="priority">[C]</span> use as much existing modules as possible   <span class="tag"><span class="blog">blog</span> <span class="exports">exports</span></span></h3>
<div class="outline-text-3" id="text-org0000012">
<p>
example using git@github.com:judell/Hypothesis.git submodule to handle pagination etc
</p>
</div>
</div>
<div class="outline-3" id="outline-container-org0000013">
<h3 id="org0000013"><a class="headerlink" href="#org0000013">¶</a><span class="todo TODO">TODO</span> <span class="priority">[C]</span> example of data merging and motivation for normalising data: slightly inconsistent bluemaestro historic logs   <span class="tag"><span class="backup">backup</span> <span class="blog">blog</span></span></h3>
<div class="outline-text-3" id="text-org0000013">
</div>
</div>
<div class="outline-3" id="outline-container-org0000014">
<h3 id="org0000014"><a class="headerlink" href="#org0000014">¶</a><span class="todo TODO">TODO</span> <span class="priority">[C]</span> benefits of having secrets in python file: you can keep auth code close to the secrets   <span class="tag"><span class="blog">blog</span> <span class="python">python</span></span></h3>
<div class="outline-text-3" id="text-org0000014">
<p>
e.g. getting new secrets – rerun the secrets.py file
can leave comments (e.g. unlike json)
</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org0000016">
<h2 id="org0000016"><a class="headerlink" href="#org0000016">¶</a><span class="section-number-2">4</span> <span class="todo TODO">TODO</span> <span class="priority">[D]</span> Assumption is that any failure is a network/temporary api issue   <span class="tag"><span class="blog">blog</span> <span class="exports">exports</span></span></h2>
<div class="outline-text-2" id="text-4">
</div>
</div>
<div class="outline-2" id="outline-container-org000001c">
<h2 id="org000001c"><a class="headerlink" href="#org000001c">¶</a><span class="section-number-2">5</span> <span class="priority">[C]</span> Backups</h2>
<div class="outline-text-2" id="text-5">
</div>
<div class="outline-3" id="outline-container-org0000017">
<h3 id="org0000017"><a class="headerlink" href="#org0000017">¶</a><span class="priority">[D]</span> <span class="timestamp-wrapper"><span class="timestamp">[2019-06-13 21:04]</span></span> joeyates/imap-backup: Backup GMail (or other IMAP) accounts to disk   <span class="tag"><span class="tools">tools</span> <span class="me">me</span> <span class="backup">backup</span></span></h3>
<div class="outline-text-3" id="text-org0000017">
<p>
<a href="https://github.com/joeyates/imap-backup">https://github.com/joeyates/imap-backup</a>
Selection:
Design Goals
Comment:
gm, I guess it's good to state design goals
</p>
</div>
</div>
<div class="outline-3" id="outline-container-org0000018">
<h3 id="org0000018"><a class="headerlink" href="#org0000018">¶</a><span class="timestamp-wrapper"><span class="timestamp">[2019-09-29 22:35]</span></span> create a page with stuff I'm backing up?</h3>
</div>
<div class="outline-3" id="outline-container-org0000019">
<h3 id="org0000019"><a class="headerlink" href="#org0000019">¶</a><span class="todo TODO">TODO</span> <span class="timestamp-wrapper"><span class="timestamp">[2019-09-30 22:04]</span></span> maybe post separately e.g. on Datahoarders?</h3>
</div>
<div class="outline-3" id="outline-container-org000001a">
<h3 id="org000001a"><a class="headerlink" href="#org000001a">¶</a><span class="todo TODO">TODO</span> <span class="timestamp-wrapper"><span class="timestamp">[2019-10-01 21:01]</span></span> github commits integrate well with my. package. also could demonstrate cachew?</h3>
</div>
<div class="outline-3" id="outline-container-org000001b">
<h3 id="org000001b"><a class="headerlink" href="#org000001b">¶</a><span class="todo TODO">TODO</span> <span class="timestamp-wrapper"><span class="timestamp">[2019-10-01 21:02]</span></span> demonstrate cachew on pdfs?</h3>
</div>
</div>
<div class="outline-2" id="outline-container-org000001d">
<h2 id="org000001d"><a class="headerlink" href="#org000001d">¶</a><span class="section-number-2">6</span> <span class="todo TODO">TODO</span> <span class="priority">[C]</span> github can be requested an export? After that just use scripts   <span class="tag"><span class="backup">backup</span> <span class="blog">blog</span></span></h2>
<div class="outline-text-2" id="text-6">
<p>
exports are asynchronous and not incremental
that's understandable from the backend implementation perspective
</p>
</div>
</div>
<div class="outline-2" id="outline-container-org000001e">
<h2 id="org000001e"><a class="headerlink" href="#org000001e">¶</a><span class="section-number-2">7</span> <span class="todo TODO">TODO</span> <span class="priority">[C]</span> not sure, maybe describe my approach to regular backups, bleanser, syncing and mypkgs in separate post?</h2>
</div>
<div class="outline-2" id="outline-container-org000001f">
<h2 id="org000001f"><a class="headerlink" href="#org000001f">¶</a><span class="section-number-2">8</span> <span class="todo TODO">TODO</span> <span class="priority">[D]</span> backups post: deduplication; mention bleanser?   <span class="tag"><span class="blog">blog</span></span></h2>
<div class="outline-text-2" id="text-8">
<p>
maybe my strategy for filtering deserves a separate post?</p>
</div>
</div>

    </section>

    
    <section class="footer">
        <div class="post-tags"><a class="post-tag" href="./tags.html#pkm">#pkm</a> <a class="post-tag" href="./tags.html#dataliberation">#dataliberation</a></div>
        <!-- TODO post-date? -->
        <div class="date">29 September 2019</div>
    </section>
    

    

    <section class="comments">
    <script data-isso="https://beepb00p.xyz/comments/" data-isso-reply-to-self="true" src="https://beepb00p.xyz/comments/js/embed.min.js">
</script>

<section id="isso-thread" data-isso-id="isso_pkm_data"></section>

    </section>

</article>

        </main>

        <!-- TODO hmm maybe display something in a footer, so it's clear it's end of content... -->
        
        <footer>
            <span style="float:left">
            <a href="https://twitter.com/karlicoss">🐦 me @twitter</a>
            ·
            <a href="https://github.com/karlicoss">💻 me @github</a>
            </span>
            
            
        </footer>
    </body>
</html>
