<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#"><head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>

        <!-- Icon made by Twitter -->
        <!-- https://twemoji.twitter.com/content/twemoji-twitter/en.html -->
        <link href="./robot-face.png" rel="icon"/>
        <link href="./robot-face.png" rel="apple-touch-icon"/>

        <meta content="https://github.com/karlicoss/beepb00p" name="generator"/>
        <meta content="English" name="language"/>
        
        <meta content="tools setup" name="keywords"/>
        
        <!-- TODO concat with keywords tags; also need to make comma separated? -->

        <title>sufs | beepb00p</title>

        <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro" rel="stylesheet" type="text/css"/>
        <link href="./css/default.css?v=3" rel="stylesheet"/>
        <!-- TODO make conditional?? -->
        <link href="./css/posts-list.css" rel="stylesheet"/> 
        <link href="./css/links.css?v=4" rel="stylesheet"/>

        

        <link href="https://beepb00p.xyz/sufs.html" rel="canonical"/>

        <!-- can test it with https://telegram.me/webpagebot -->
        <!-- or https://developers.facebook.com/tools/debug -->
        <meta content="website" property="og:type"/>
        <meta content="https://beepb00p.xyz/sufs.html" property="og:url"/> <!-- TODO base? -->
        <meta content="sufs | beepb00p" property="og:title"/>
        <meta content="Tool to merge directories via symlinks" property="og:description"/>
        <!-- ugh. why is image necessary??? otherwise other parts aren't working or I get lots of 404s -->
        <!-- ugh. Facebook really wants jpg? -->
        <!-- also Facebook displays it with black background, but whatever, fuck it. -->
        <meta content="https://beepb00p.xyz/robot-face.jpg" property="og:image"/>

    </head>
    <body>
        <!-- TODO make semantic -->
        <header>
            <nav>
                <span class="nav-left">
                    <a class="fat" href="./">Home</a>
                    <!-- TODO eh, not sure if this symbol is good for that... -->
                    Â·
                    <a class="fat" href="./ideas.html">Ideas</a>
                    Â·
                    <a class="fat" href="./exobrain">Exobrain</a>
                    Â·
                    <a class="fat" href="./tags.html">Tags</a>
                </span>
                <span class="nav-right">
                    <a class="fat" href="./feed.html">Feed</a>
                    Â·
                    <a class="fat" href="./site.html">Site</a>
                    Â·
                    <a class="fat" href="./me.html">Me</a>
                </span>
            </nav>
        </header>

        <main>
            




<article>
    
    <section class="post-title">
    <h1>sufs</h1>
    <div class="summary">Tool to merge directories via symlinks
    </div></section>
    <!-- are sections appropriate for that? -->

    <section class="content">
    <p><a href="https://github.com/karlicoss/sufs">sufs</a> is a tool for â€˜mergingâ€™ multiple directories into one via symlinks.</p>
<p>Iâ€™m syncing most of my stuff via syncthing, but some of it has to be locally (mainly for stupid reasons like massive <code>node_modules</code> directory etc.). But itâ€™s nice to have a unified view of them so you donâ€™t have to memorize what did you put where.</p>
<p>Usage example:</p>
<pre><code>   # initialize merged dir`
   mkdir /home/user/datas 

   # you might want to keep the following in cron
   sufs.py --to /home/user/datas /home/user/syncthing/data /home/user/dropbox/data /home/user/syncthing/data</code></pre>
<p>Before I wrote this script I tried FUSE based filesystems: <a href="https://en.wikipedia.org/wiki/UnionFS">Unionfs</a> and <a href="https://github.com/trapexit/mergerfs">Mergerfs</a>, but wasnâ€™t really satisfied. Weirdly, couldnâ€™t also find anythig existing on github, so had to write my own.</p>
<p>First, you donâ€™t know where actually fuse mounted dirst reside. Second, for instance, mergerfs had some weird new file handling logic, so the directories would end up scattered across multiple sources. Overall I found it a bit confusing.</p>
<p>This script uses symlinks, so you always know the actual location; and also maintains the top level directory as read only, so you canâ€™t end up with dangling directories.</p>
<p>The only disadvantage at the moment is that symlink updating can only happen once a minute if you run via cron, but should be easy to use inotify if thatâ€™s an issue.</p>

    </section>

    
    <section class="footer">
        <div class="post-tags">
            <a class="post-tag tag-active" href="./tags.html#tools">#tools</a>
            <a class="post-tag tag-inactive" href="./tags.html">#setup</a>
        </div>
        <time datetime="2019-05-09T00:00:00">09 May 2019</time>
    </section>
    

    

    <section class="comments">
    <script data-isso="https://beepb00p.xyz/comments/" data-isso-reply-to-self="true" src="https://beepb00p.xyz/comments/js/embed.min.js">
</script>

<section data-isso-id="isso_sufs" id="isso-thread"></section>
    </section>

</article>
        </main>
        
        <!-- TODO make semantic -->
        <footer>
            <span style="float:left">
            <a href="https://twitter.com/karlicoss">ğŸ¦ me @twitter</a>
            Â·
            <a href="https://github.com/karlicoss">ğŸ’» me @github</a>
            </span>

            <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>
        </footer>
    
</body></html>