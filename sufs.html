<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta name="generator" content="hakyll">
        <meta name="language" content="English">
        
        <meta name="keywords" content="tools setup">
        
        <!-- TODO concat with keywords tags; also need to make comma separated? -->

        <title>sufs | Mildly entertainingᵝ</title>

        <link rel="stylesheet" href="./css/default.css" />

        <!-- TODO make it conditional on actually having math on page? -->
        <script type="text/javascript">
 window.MathJax = {
     tex2jax: {
         // note that hakyll source has got double dollar signs due to special meaning in templates
         inlineMath: [ ['$','$'], ["\\(","\\)"] ],
         processEscapes: true
     }
 };
</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    </head>
    <body>
        <header>
            <nav>
                <span class="nav-left">
                    <a class="fat" href="./">Home</a>
                    <!-- TODO eh, not sure if this symbol is good for that... -->
                    ·
                    <a class="fat" href="./ideas.html">Ideas</a>
                    ·
                    <a class="fat" href="./notes.html">Notes</a>
                    ·
                    <a class="fat" href="./tags.html">Tags</a>
                </span>
                <span class="nav-right">
                    <a class="fat" href="./feed.html">Feed</a>
                    ·
                    <a class="fat" href="./site.html">Site</a>
                    ·
                    <a class="fat" href="./me.html">Me</a>
                </span>
            </nav>
        </header>

        <main>
            




<article>
    <section class="post-title">
    <h1>sufs</h1>
    <div class="summary">Tool to merge directories via symlinks</h2>
    </section>
    <!-- are sections appropriate for that? -->

    <section class="content">
    <p><a href="https://github.com/karlicoss/sufs">sufs</a> is a tool for ‘merging’ multiple directories into one via symlinks.</p>
<p>I’m syncing most of my stuff via syncthing, but some of it has to be locally (mainly for stupid reasons like massive <code>node_modules</code> directory etc.). But it’s nice to have a unified view of them so you don’t have to memorize what did you put where.</p>
<p>Usage example:</p>
<pre><code>   # initialize merged dir`
   mkdir /home/user/datas 

   # you might want to keep the following in cron
   sufs.py --to /home/user/datas /home/user/syncthing/data /home/user/dropbox/data /home/user/syncthing/data</code></pre>
<p>Before I wrote this script I tried FUSE based filesystems: <a href="https://en.wikipedia.org/wiki/UnionFS">Unionfs</a> and <a href="https://github.com/trapexit/mergerfs">Mergerfs</a>, but wasn’t really satisfied. Weirdly, couldn’t also find anythig existing on github, so had to write my own.</p>
<p>First, you don’t know where actually fuse mounted dirst reside. Second, for instance, mergerfs had some weird new file handling logic, so the directories would end up scattered across multiple sources. Overall I found it a bit confusing.</p>
<p>This script uses symlinks, so you always know the actual location; and also maintains the top level directory as read only, so you can’t end up with dangling directories.</p>
<p>The only disadvantage at the moment is that symlink updating can only happen once a minute if you run via cron, but should be easy to use inotify if that’s an issue.</p>
    </section>

    
    <section class="footer">
        <div class="post-tags"><a class="post-tag" href="./tags.html#tools">#tools</a> <a class="post-tag" href="./tags.html#setup">#setup</a></div>
        <!-- TODO post-date? -->
        <div class="date">09 May 2019</div>
    </section>
    

    <section class="comments">
    <script data-isso="https://beepb00p.xyz/comments/" data-isso-reply-to-self="true" src="https://beepb00p.xyz/comments/js/embed.min.js">
</script>

<section id="isso-thread" data-isso-id="isso_sufs"></section>

    </section>

</article>

        </main>

        <!-- TODO hmm maybe display something in a footer, so it's clear it's end of content... -->
        <footer>
        </footer>
    </body>
</html>
